<div (mouseenter)="showTooltip = true" (mouseleave)="showTooltip = false" class="relative">
  @if (gameStore.isNewUpgrade(upgrade)) {
    <div
      class="absolute -top-2 -right-2 bg-red-600 text-white text-xs font-bold px-2 py-0.5 rounded-full
      border-2 border-black z-max">
      NEW
    </div>
  }
  <button
    (click)="handleBuy()"
    [disabled]="blocked || type === 'profile'"
    [ngClass]="{
      group: !blocked,
      'disabled:bg-disabled disabled:border-none':type ==='shop',
      'active:scale-95 hover:bg-secondary/50': type === 'shop' && !blocked,
    }"
    class="disabled:scale-100 bg-secondary/25 border-2 border-secondary/50 rounded-2xl flex flex-row gap-2.5
    w-full px-4 py-2.5 items-center justify-between !text-text">
    <img [alt]="upgrade.name" [src]="icon()"
         class="block bg-brand w-12 h-12 rounded-2xl flex-none sm:w-16 sm:h-16"/>
    <section class="flex flex-col gap-1">
      <p
        [ngClass]="{
          'text-[10px] !text-end !text-dark': type === 'profile',
        }"
        class="text-start text-text break-words leading-tight
      sm:max-w-[16dvw] md:max-w-full 2xl:max-w-[7dvw] text-sm md:text-base"
      >
        {{ upgrade.name }}
        @if (type === 'profile' && upgrade.times_bought > 1) {
          <span class="text-[var(--secondary)]">[{{ upgrade.times_bought }}]</span>
        }
      </p>
      @if (type === 'profile') {
        <p class="text-end text-[10px] text-[var(--disabled)] break-words leading-tight
       sm:max-w-[16dvw] md:max-w-full 2xl:max-w-[7dvw] text-sm md:text-base">
          {{ boostDisplay() }}
        </p>
      }
    </section>
    @if (type === 'shop') {
      <span class="flex-1"></span>
      <p class="whitespace-nowrap">{{ priceString() }}‚õÅ</p>
      <img
        [ngClass]="{
          'opacity-70': blocked,
          'bg-brand': !blocked,
        }"
        alt=""
        class="hidden sm:block w-16 h-16 rounded-2xl border-2 border-secondary
               group-hover:bg-secondary group-active:bg-secondary flex-none"
        src="/icons/game/sell.svg"/>
      @if (showTooltip) {
        <div class="absolute right-1/3 px-3 py-2 rounded-2xl bg-brand
         border-black border-2 text-xs text-white md:text-base shadow z-max">
          {{ boostDisplay() }}
        </div>
      }

    }
  </button>
</div>
